@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   1. BASE DEL SISTEMA Y BLINDAJE CROSS-PLATFORM (M√ìVIL Y DESKTOP)
   ========================================= */
:root {
  --foreground-rgb: 238, 238, 238;
  --background-rgb: 5, 5, 5;
}

html, body {
  color: rgb(var(--foreground-rgb));
  background: rgb(var(--background-rgb));
  
  /* üî• CORRECCI√ìN T√ÅCTICA: Liberamos el eje vertical para el Login, bloqueamos el horizontal */
  overflow-x: hidden;
  overflow-y: auto; 
  overscroll-behavior-y: none;
  
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  transform: translateZ(0); 
  text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
  touch-action: pan-x pan-y;
}

/* =========================================
   1.5. SCROLLBARS ELEGANTES (VISIBLES PARA UX)
   ========================================= */
::-webkit-scrollbar {
  width: 6px; /* M√°s ancho para que el dedo/rat√≥n lo intuya */
  height: 6px;
}
::-webkit-scrollbar-track {
  background: rgba(150, 150, 150, 0.05); /* Pista muy sutil para indicar que hay scroll */
  border-radius: 10px;
}
::-webkit-scrollbar-thumb {
  background: rgba(150, 150, 150, 0.4); /* Semivisible y elegante */
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: rgba(150, 150, 150, 0.8); /* Se ilumina al pasar el rat√≥n */
}

* {
  scrollbar-width: thin;
  scrollbar-color: rgba(150, 150, 150, 0.4) transparent;
}

/* üî• NEUTRALIZADOR: Si alguna columna vieja tiene 'scrollbar-hide', la forzamos a mostrarse fina */
.scrollbar-hide::-webkit-scrollbar {
    display: block !important; 
    width: 4px;
}
.scrollbar-hide {
    -ms-overflow-style: auto !important;
    scrollbar-width: thin !important;
}

.custom-scrollbar {
  overflow-y: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch; /* Obligatorio para que el m√≥vil deslice suave */
}

/* =========================================
   2. LIMPIEZA T√ÅCTICA DE MAPBOX
   ========================================= */
/* Elimina logos y atribuciones para vista limpia */
.mapboxgl-ctrl-logo, 
.mapboxgl-ctrl-attrib {
  display: none !important;
}

/* Elimina popups por defecto feos */
.mapboxgl-popup-content {
  background: transparent !important;
  padding: 0 !important;
  border: none !important;
  box-shadow: none !important;
}
.mapboxgl-popup-tip { display: none; }

/* =========================================
   3. ARREGLO DE ACTIVOS (NANOCARDS) - VERSI√ìN CORREGIDA
   ========================================= */
.nanocard-marker {
  /* 1. VISIBILIDAD TOTAL: Permite que la tarjeta salga de la caja */
  overflow: visible !important; 
  
  /* 2. MANEJABILIDAD: Asegura que el rat√≥n detecte el click */
  pointer-events: auto !important;
  cursor: pointer;

  /* 3. POSICIONAMIENTO */
  display: flex;
  justify-content: center;
  align-items: flex-end; /* La base del pin toca la coordenada */
  width: 0;  /* Truco t√°ctico: El punto exacto es el centro */
  height: 0; 
  
  /* 4. JERARQU√çA: Siempre por encima de los edificios 3D */
  z-index: 50; 
  will-change: transform;
}

/* Efecto de elevaci√≥n al pasar el mouse */
.nanocard-marker:hover {
  z-index: 9999 !important; /* Prioridad absoluta */
  transform: scale(1.1); /* Zoom suave */
  transition: transform 0.2s ease-out;
}

/* =========================================
   5. INTERFAZ DE CRISTAL (GLASS PANELS)
   ========================================= */
.glass-panel {
  /* 1. Fondo ligeramente m√°s oscuro para que la luz del mapa no se cuele */
  background: rgba(5, 5, 5, 0.92) !important;
  
  /* 2. EL SECRETO ANTI-NIEBLA: Saturar el desenfoque para mantener el contraste */
  backdrop-filter: blur(24px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(24px) saturate(180%) !important;
  
  /* 3. Bordes y sombras m√°s limpios */
  border: 1px solid rgba(255, 255, 255, 0.08) !important;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6) !important;
}

.backdrop-blur-xl { backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px); }
.backdrop-blur-2xl { backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px); }

/* =========================================
   5. NE√ìN INTELIGENTE (HIGH VOLTAGE) ‚ö°
   ========================================= */
/* Definimos la onda de energ√≠a */
@keyframes neonWave {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 0 currentColor; /* La luz nace en el centro */
    opacity: 0.9; 
  }
  70% {
    transform: scale(2.5); /* Se expande */
    box-shadow: 0 0 0 10px transparent; /* El rastro se desvanece */
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 0;
  }
}

/* Clase para aplicar a los puntos de luz */
.neon-pulse {
  position: relative;
}

.neon-pulse::after {
  content: '';
  position: absolute;
  top: 50%; left: 50%;
  width: 100%; height: 100%;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  z-index: -1;
  background: currentColor; /* Usa el color del texto (azul/rojo) */
  animation: neonWave 3s infinite cubic-bezier(0, 0, 0.2, 1);
}

/* Animaci√≥n de viaje espacial */
@keyframes fly-up {
  from { transform: translateY(0px); }
  to { transform: translateY(-2000px); }
}

/* =========================================
   NUEVO SISTEMA ESTELAR REALISTA
   ========================================= */

/* 1. El Campo de Batalla (Fondo Profundo) */
.space-container {
  min-height: 100vh;
  width: 100%;
  /* Un degradado m√°s rico y profundo */
  background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
  overflow: hidden;
  position: relative;
}

/* 2. Nueva Animaci√≥n: TITILAR (Twinkle) en lugar de volar */
/* Hace que las estrellas pulsen suavemente */
@keyframes twinkle {
  0%, 100% { opacity: 0.3; scale: 0.8; }
  50% { opacity: 1; scale: 1; }
}

/* Configuraci√≥n com√∫n para todas las estrellas */
.stars-layer-1, .stars-layer-2, .stars-layer-3 {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
  border-radius: 50%; /* ¬°CRUCIAL! Esto las hace redondas, no p√≠xeles cuadrados */
}

/* --- CAPA 1: Polvo estelar lejano (Muy peque√±as y est√°ticas) --- */
.stars-layer-1 {
  width: 1px;
  height: 1px;
  /* Muchas estrellas peque√±itas */
  box-shadow: 
    10vw 15vh #FFF, 30vw 40vh #FFF, 50vw 10vh #FFF, 70vw 60vh #FFF, 90vw 20vh #FFF,
    15vw 80vh #FFF, 35vw 65vh #FFF, 55vw 90vh #FFF, 75vw 30vh #FFF, 95vw 75vh #FFF,
    5vw 25vh #FFF, 25vw 5vh #FFF, 45vw 35vh #FFF, 65vw 50vh #FFF, 85vw 15vh #FFF;
  opacity: 0.3; /* Muy tenues */
  z-index: 1;
}

/* --- CAPA 2: Estrellas Medias (Titilan suavemente) --- */
.stars-layer-2 {
  width: 2px;
  height: 2px;
  /* Menos cantidad, un poco m√°s visibles */
  box-shadow: 
    20vw 30vh #e8f4ff, 60vw 20vh #e8f4ff, 80vw 80vh #e8f4ff,
    40vw 70vh #fff4e8, 10vw 90vh #e8f4ff, 90vw 40vh #fff4e8;
  /* Animaci√≥n de titileo lenta */
  animation: twinkle 8s ease-in-out infinite alternate;
  opacity: 0.6;
  z-index: 2;
  /* Un toque sutil de color (azul/amarillo muy claro) en lugar de blanco puro */
  color: #e8f4ff; 
}

/* --- CAPA 3: Estrellas Brillantes (Inteligencia) --- */
.stars-layer-3 {
  width: 3px;
  height: 3px;
  /* Pocas, pero protagonistas */
  /* El cuarto valor del box-shadow (4px) es el DIFUMINADO (Glow) */
  box-shadow: 
    15vw 50vh 4px #FFF, 
    70vw 15vh 4px #FFF, 
    50vw 85vh 4px #FFF;
  /* Animaci√≥n de titileo m√°s r√°pida */
  animation: twinkle 5s ease-in-out infinite alternate-reverse;
  opacity: 0.8;
  z-index: 3;
}

/* =========================================
   SISTEMA DE PROPULSI√ìN NE√ìN V2 (CORREGIDO)
   ========================================= */

/* --- NE√ìN AZUL (Explorador) --- */
.neon-blue {
  /* Estado Reposo: Borde y brillo muy sutil */
  border: 1px solid rgba(59, 130, 246, 0.3) !important;
  box-shadow: 0 0 15px rgba(59, 130, 246, 0.1);
  transition: all 0.4s ease-in-out;
}

.neon-blue:hover {
  /* Estado Ataque: ¬°Brillo Potente! */
  border-color: #3b82f6 !important; /* Azul puro */
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.6), 
              0 0 50px rgba(59, 130, 246, 0.4),
              inset 0 0 20px rgba(59, 130, 246, 0.1) !important; /* Brillo tambi√©n hacia adentro */
  transform: scale(1.02); /* Peque√±o zoom */
}

/* --- NE√ìN NARANJA (Arquitecto) --- */
.neon-orange {
  /* Estado Reposo */
  border: 1px solid rgba(245, 158, 11, 0.3) !important;
  box-shadow: 0 0 15px rgba(245, 158, 11, 0.1);
  transition: all 0.4s ease-in-out;
}

.neon-orange:hover {
  /* Estado Ataque */
  border-color: #f59e0b !important; /* Naranja puro */
  box-shadow: 0 0 20px rgba(245, 158, 11, 0.6), 
              0 0 50px rgba(245, 158, 11, 0.4),
              inset 0 0 20px rgba(245, 158, 11, 0.1) !important;
  transform: scale(1.02);
}

/* --- PROTOCOLO FUCSIA: ESC√ÅNER HOLOGR√ÅFICO --- */
@keyframes scanner-move {
  0% { top: -10%; opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { top: 110%; opacity: 0; }
}

.animate-scanner {
  animation: scanner-move 3s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  background: linear-gradient(to bottom, transparent, rgba(217, 70, 239, 0.5), rgba(217, 70, 239, 0.8), rgba(217, 70, 239, 0.5), transparent);
  box-shadow: 0 0 30px rgba(217, 70, 239, 0.6);
}

/* Efecto Grid T√°ctico sobre la imagen */
.tactical-grid {
  background-image: 
    linear-gradient(rgba(217, 70, 239, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(217, 70, 239, 0.1) 1px, transparent 1px);
  background-size: 40px 40px;
}

/* 2. Estilos para el texto de la IA */
@keyframes iaPulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
}

.ia-text-normal {
  /* Color verde s√≥lido y brillante para que se lea bien sobre negro */
  color: #4ade80 !important; 
  
  /* Eliminamos cualquier sombra o brillo anterior */
  text-shadow: none !important;
  filter: none !important;
  
  /* Aseguramos visibilidad y tama√±o */
  font-size: 13px;
  font-weight: 500; /* Peso medio para que no se vea "fina" */
  margin-top: 8px;
  
  /* Aplicamos la animaci√≥n de latido (duraci√≥n 2 segundos, infinita) */
  animation: iaPulse 2s infinite ease-in-out;
}

/* Ocultar la br√∫jula y controles de navegaci√≥n de Mapbox */
.mapboxgl-ctrl-compass, 
.mapboxgl-ctrl-group {
    display: none !important;
}

/* =========================================
   7. OMNI BAR - OBSIDIAN BLACK SHINE (PREMIUM)
   ========================================= */
.omni-obsidian-bar {
  /* Fondo negro profundo con un liger√≠simo degradado cil√≠ndrico para dar volumen 3D */
  background: linear-gradient(to bottom, rgba(30, 30, 30, 0.95), rgba(5, 5, 5, 0.98)) !important;
  
  /* Blur extremo y saturaci√≥n al 250% para aniquilar cualquier rastro de niebla */
  backdrop-filter: blur(40px) saturate(250%) !important;
  -webkit-backdrop-filter: blur(40px) saturate(250%) !important;
  
  /* Borde sutil */
  border: 1px solid rgba(255, 255, 255, 0.12) !important;
  
  /* ‚ú® LA MAGIA: Sombra negra masiva exterior + Un hilo de luz blanca interior (el Brillo) */
  box-shadow: 
    0 25px 50px -12px rgba(0, 0, 0, 0.8), /* Sombra exterior para que flote */
    inset 0 2px 3px rgba(255, 255, 255, 0.15) !important; /* El reflejo de cristal en el borde superior */
}

/* =========================================
   8. AUTO-BLINDAJE M√ìVIL GLOBAL (GENERAL'S COMMAND)
   ========================================= */
/* Obliga a TODAS las listas y columnas de la plataforma a respetar la pantalla sin tener que ir archivo por archivo */

.overflow-y-auto, 
.custom-scrollbar {
    min-height: 0 !important; /* Evita que los paneles rompan la pantalla hacia abajo */
    -webkit-overflow-scrolling: touch !important; /* Activa el deslizamiento nativo perfecto en iOS/Android */
    overscroll-behavior: contain !important; /* Evita que al hacer scroll en la lista se mueva el mapa detr√°s */
}

/* Blindaje extra para los contenedores Flex que envuelven las listas */
.flex-1 {
    min-height: 0;
    min-width: 0;
}


/* =========================================
   9. PROTOCOLO ANT-MAN V3 (ESCALADO AGRESIVO PARA PORT√ÅTILES Y M√ìVILES)
   ========================================= */
/* Redimensiona la plataforma completa. Si baja el font-size, Tailwind encoge TODO (paneles, letras, m√°rgenes) proporcionalmente. */

@media (max-width: 1440px), (max-height: 850px) {
  html { font-size: 13px !important; } /* Reducci√≥n moderada para pantallas medianas */
}

@media (max-width: 1280px), (max-height: 750px) {
  html { font-size: 11px !important; } /* üî• REDUCCI√ìN EXTREMA (30% menos). Ideal para port√°tiles de 14" con Zoom en Windows. La Nano Card ahora cabr√° perfectamente. */
}

@media (max-width: 768px) {
  html { font-size: 13px !important; } /* üî• REDUCCI√ìN M√ìVIL: Hace que la interfaz en el tel√©fono sea m√°s fina, compacta y profesional. */
}

/* =========================================
   10. ROMPEHIELOS T√ÅCTICO (DESBLOQUEO DE SCROLL M√ìVIL FORZADO)
   ========================================= */
/* El mapa (Mapbox) roba los toques del dedo. Con esto, le ponemos una armadura a los paneles para que manden ellos. */

.custom-scrollbar,
.overflow-y-auto,
[class*="overflow-y-auto"] {
    /* 1. Despierta el motor de scroll del m√≥vil forzando la propiedad a 'scroll' en lugar de 'auto' */
    overflow-y: scroll !important; 
    
    /* 2. Inercia de Apple/Android */
    -webkit-overflow-scrolling: touch !important; 
    
    /* 3. Le grita al m√≥vil: "¬°SOLO GESTOS VERTICALES AQU√ç!" (Bloquea a Mapbox) */
    touch-action: pan-y auto !important; 
    
    /* 4. Fuerza a que el dedo se detecte en esta capa y no traspase al mapa */
    pointer-events: auto !important; 
    
    /* 5. A√≠sla el scroll para que no rebote la p√°gina entera */
    overscroll-behavior: contain !important;
    
    /* 6. Contexto 3D para evitar bugs de renderizado en Safari iOS */
    transform: translateZ(0); 
    position: relative;
    z-index: 50;
}

/* Blindaje extra para que la caja principal no estalle en el m√≥vil */
.flex-1 {
    min-height: 0 !important;
    flex-shrink: 1 !important;
}

/* =========================================
   11. ARSENAL DE √âLITE: EFECTO "WOW" Y MICRO-INTERACCIONES
   ========================================= */

/* üéØ 1. SELECCI√ìN DE TEXTO T√ÅCTICA (Adi√≥s al azul por defecto) */
/* Cuando un usuario arrastra el rat√≥n para copiar texto, en lugar del azul soso de Windows/Mac, ver√° un Ne√≥n futurista brillante */
::selection {
  background: rgba(37, 99, 235, 0.3); /* Azul Ne√≥n transl√∫cido */
  color: #ffffff;
  text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
}
::-moz-selection {
  background: rgba(37, 99, 235, 0.3);
  color: #ffffff;
}

/* üéØ 2. TIPOGRAF√çA INTELIGENTE (IA CSS) */
/* Evita autom√°ticamente que una sola palabra se quede "colgando" sola en la √∫ltima l√≠nea de un t√≠tulo o p√°rrafo. Equilibrio perfecto. */
h1, h2, h3, h4, h5, h6 {
  text-wrap: balance !important;
}
p {
  text-wrap: pretty !important;
}

/* üéØ 3. DETALLES DE HACKER EN FORMULARIOS */
input, textarea {
  /* El cursor (la barrita que parpadea al escribir) ahora ser√° Verde IA Brillante en lugar de negro */
  caret-color: #4ade80 !important; 
  /* Los checkboxes nativos usar√°n el azul corporativo */
  accent-color: #2563eb !important; 
}

/* üéØ 4. CURVA DE ACELERACI√ìN "APPLE SPRING" GLOBALES */
/* Cambia la forma matem√°tica en la que se mueven los botones al hacer hover. En lugar de ser lineal, tiene el "rebote el√°stico" de iOS. */
button, a, .glass-panel {
  transition-timing-function: cubic-bezier(0.32, 0.72, 0, 1) !important;
}

/* üéØ 5. ANTI-FLICKER HARDWARE (Aceleraci√≥n de GPU Extrema) */
/* Evita parpadeos microsc√≥picos cuando los paneles laterales entran desliz√°ndose sobre el mapa 3D */
.animate-slide-in-right, 
.animate-slide-in-left, 
.animate-slide-in-bottom,
.animate-fade-in-up {
  will-change: transform, opacity;
  backface-visibility: hidden;
}

/* üéØ 6. EFECTO "CRISTAL EMPA√ëADO" EN SCROLL */
/* Si alguna vez el usuario hace scroll hacia abajo en el mapa (fuera del panel), el fondo respira suavemente */
html {
  scroll-behavior: smooth !important; 
}